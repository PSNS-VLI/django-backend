"use strict";(self["webpackChunkERP_Experiment"]=self["webpackChunkERP_Experiment"]||[]).push([[383],{6251:function(t,e,n){n.d(e,{Z:function(){return b}});n(26699),n(32023);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[t.operation?e("div",{staticClass:"table-operation"},[e("a-row",{attrs:{gutter:48}},[t.operation.includes("edit")?e("a-col",{attrs:{md:3,sm:6}},[e("a-button",{attrs:{type:t.isEdit?"default":"primary",icon:"edit"},on:{click:function(e){t.isEdit=!t.isEdit}}},[t.isEdit?[t._v("取消编辑")]:[t._v("编辑")]],2)],1):t._e(),t.operation.includes("add")?e("a-col",{attrs:{md:3,sm:6}},[e("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleAdd}},[t._v(" 新增 ")])],1):t._e(),t.operation.includes("delete")?e("a-col",{attrs:{md:3,sm:6}},[e("a-button",{attrs:{type:t.isDelete?"default":"primary",icon:"delete"},on:{click:function(e){t.isDelete=!t.isDelete}}},[t.isDelete?[t._v("取消删除")]:[t._v("删除")]],2)],1):t._e(),t.operation.includes("search")?e("a-col",{attrs:{md:6,sm:6}},[e("a-input-search",{attrs:{placeholder:"Search"}})],1):t._e()],1)],1):t._e(),e("div",{staticClass:"table-wrapper"},[t.hasSide?e("a-table",{attrs:{bordered:"",columns:t.sideColumns,locale:t.locale}},[t.title?e("template",{slot:"title"},[e("div",{staticClass:"table-title"},[t._v(t._s(t.title))])]):t._e()],2):t._e(),e("a-table",{attrs:{bordered:"",columns:t.mainColAndScoped.columns,"data-source":t.mainData,pagination:!1},scopedSlots:t._u([t._l(t.mainColAndScoped.dataIndexList,(function(n){return{key:n,fn:function(a,i,r){return["operation"!==n?e("div",{key:n},[t.mainColAndScoped.textFields.includes(n)?e("div",[e("keep-alive",[t.isEdit&&!t.frozenList.includes(n)?e("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:a},on:{input:function(e){return t.handleChange(e.target.value,i,r,n)}}}):e("div",[t._v(" "+t._s(a)+" ")])],1)],1):e("div",[e("keep-alive",[t.isEdit&&!t.frozenList.includes(n)?e("a-input-number",{staticStyle:{margin:"-5px 0"},attrs:{value:a},on:{change:function(e){return t.handleChange(e,i,r,n)}}}):e("div",[t._v(" "+t._s(a)+" ")])],1)],1)]):t._e(),"operation"===n&&t.isDelete?e("div",{key:n},[e("a-popconfirm",{attrs:{title:"确认删除?"},on:{confirm:function(){return t.handleDelete(i)}}},[e("a",{attrs:{href:"javascript:;"}},[t._v("Delete")])])],1):t._e()]}}}))],null,!0)},[!t.hasSide&&t.title?e("template",{slot:"title"},[e("div",{staticClass:"table-title"},[t._v(t._s(t.title))])]):t._e()],2)],1)])},i=[],r=n(3360),s=(n(41539),n(54747),n(34553),n(40561),n(92222),n(39714),n(21249),n(69826),n(83465)),l=n.n(s),o=function(){var t=this,e=t._self._c;return e("div")},u=[],d={data:function(){return{}}},c=d,p=n(1001),m=(0,p.Z)(c,o,u,!1,null,null,null),f=m.exports,h={model:{prop:"mainData",event:"change"},props:{title:{type:String,default:""},hasSide:{type:Boolean,default:!0},operation:{type:String,default:""},sideColumns:{type:Array,default:function(){return[]}},frozenList:{type:Array,default:function(){return[]}},mainColumns:{type:Array,default:function(){return[]}},mainData:{type:Array,default:function(){return[]}}},data:function(){var t=this.$createElement;return this.locale={emptyText:t(f)},{isEdit:!1,isDelete:!1}},computed:{mainColAndScoped:function(){var t=l()(this.mainColumns),e=[],n=[];function a(t){t.forEach((function(t){t.dataIndex?(t.scopedSlots={customRender:t.dataIndex},e.push(t.dataIndex),t.type&&"text"===t.type&&n.push(t.dataIndex)):t.children&&a(t.children)}))}if(a(t),this.isDelete)t.push({title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}),e.push("operation");else{var i=t.findIndex((function(t){return"operation"===t.dataIndex})),r=t.findIndex((function(t){return"operation"===t.dataIndex}));t.splice(i>=0?i:t.length,1),e.splice(r>=0?r:e.length,1)}return{columns:t,dataIndexList:e,textFields:n}},inputListeners:function(){return Object.assign({},this.$linsteners,{blur:function(){this.$emit("change")}})}},methods:{handleAdd:function(){this.$emit("change",this.mainData.concat([Object.assign({key:Date.now().toString()},this.mainColAndScoped.dataIndexList.reduce((function(t,e){return t[e]=0,t}),{}))]))},handleDelete:function(t){var e=l()(this.mainData);e.splice(e.findIndex((function(e){return e.key===t.key})),1),this.$emit("change",e)},handleChange:function(t,e,n,a){var i=this.mainData.map((function(t){return(0,r.Z)({},t)}));i.find((function(t){return t.key===e.key}))[a]=t,this.$emit("change",i)}}},v=h,y=(0,p.Z)(v,a,i,!1,null,"8642ca34",null),b=y.exports},88383:function(t,e,n){n.r(e),n.d(e,{default:function(){return E}});var a=function(){var t=this,e=this,n=e._self._c;return n("page-header-wrapper",{attrs:{"tab-list":e.tabList,"tab-active-key":e.tabActiveKey,"tab-change":function(e){t.tabActiveKey=e}}},[n("a-card",{attrs:{bordered:!1}},[n("keep-alive",[n(e.tabActiveKey,{tag:"component",attrs:{sideColumns:e.sideColumns,mainColumns:e.mainColumns,tableData:e.tableData}})],1)],1)],1)},i=[],r=n(50686),s=function(){var t=this,e=t._self._c;return e("a-card",{attrs:{bordered:!1}},[e("div",{staticClass:"table-wrapper"},[e("ErpTable",{attrs:{title:"PA26-50 的MPS",operation:"edit",frozenList:t.frozenList,mainColumns:t.mainColumns,sideColumns:t.sideColumns,mainData:t.mainData},on:{change:function(e){return t.calMainData(e)}}})],1)])},l=[],o=n(3360),u=n(20629),d=n(6251),c=(0,u._p)("erp/mps"),p=c.mapMutations,m={components:{ErpTable:d.Z},props:{sideColumns:{type:Array,default:function(){return[]}},mainColumns:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}}},data:function(){return this.frozenList=["name"],{mainData:[]}},watch:{tableData:{immediate:!0,handler:function(t){this.calMainData(t)}}},methods:(0,o.Z)((0,o.Z)({},p(["setPORele"])),{},{calMainData:function(t){var e=(0,r.tA)(t);this.mainData=(0,r.Qm)(t,(0,r.xz)(e,[2,4,4],20,160,1)),this.setPORele({data:e[8]})}})},f=m,h=n(1001),v=(0,h.Z)(f,s,l,!1,null,"538db649",null),y=v.exports,b=function(){var t=this,e=t._self._c;return e("div")},_=[],C={},D=C,x=(0,h.Z)(D,b,_,!1,null,"e462e07a",null),g=x.exports,k={components:{MPS:y,RCCP:g},data:function(){return this.tabList=[{key:"MPS",tab:"主生产计划表"},{key:"RCCP",tab:"粗能力计划"}],this.sideColumns=[{title:"编制日期"},{title:"2023/10/2"},{title:"安全库存"},{title:"20"},{title:"生产批量"},{title:"160"},{title:"提前期"},{title:"1"}],{tabActiveKey:"MPS",mainColumns:[],tableData:[]}},created:function(){this.mainColumns=(0,r.wR)("mps",[2,4,4]);var t=(0,r.s)("mps",[2,4,4]),e=(0,r.tA)(t);e[0]=[0,70,70,70,70,70,80,80,80,80,80],e[1]=[0,100,90,80,60,70,90,50,100,90,70],e[4][0]=120,this.tableData=(0,r.Qm)(t,e)}},A=k,S=(0,h.Z)(A,a,i,!1,null,null,null),E=S.exports}}]);